<html>
   <head>
      <title>CRUD APP</title>
      <link href="{{url_for('static', filename='css/bootstrap.min.css')}}" rel="stylesheet">
      <link rel="shortcut icon" href="{{url_for('static',filename='chubb.png')}}">
   </head>
   <body>
      {% block body %}
      <div class="container">
         <div class="well text-center">
            <h1>CHUBB App Flask</h1>
         </div>
      </div>
      <div class='container'>
         <div class='row'>
            <div class='col md-12'>
               <h2>Test Cases <button type="button" class="btn btn-success pull-right" data-toggle="modal" data-target="#myModal">Add Test Case</button></h2>
               {% with messages = get_flashed_messages() %}
               {% if messages %}
               {% for message in messages %}
               <div class="alert alert-success alert-dismissable" role="alert">
                 <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                  <span aria-hidden="ture">x</span>
                 </button>
                  {{ message }}

               </div>


               {%endfor%}
               {%endif%}
               {%endwith%}
               <!-- Modal -->



               <div class="modal fade" id="myModal" role="dialog">
                  <div class="modal-dialog">

                    <div class="modal-content">
                      <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal">&times;</button>
                          <h4 class="modal-title">Please Insert data</h4>
                      </div>
                      <div class="modal-body">
                        <form action="{{url_for('insert')}}" method="POST">
                          <div class="form-group">
                            <label>Test Case Name:</label>
                            <input type="text" class="form-control" name="testcasename" required="1">
                          </div>
                          <div class="form-group">
                            <label>Test Case:</label>
                            <input type="text" class="form-control" name="testcase" required="1">
                          </div>
                          <div class="form-group">
                            <label>Source query:</label>
                            <input type="text" class="form-control" name="sourcequery" required="1">
                          </div>
                          <div class="form-group">
                            <label>Target query:</label>
                            <input type="text" class="form-control" name="targetquery" required="1">
                          </div>
                          <div class="form-group">
                            <button class="btn btn-primary" type="submit">Insert Data</button>
                          </div>
                        </form>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                      </div>
                    </div>

                  </div>
                </div>

            </div>

      <table id = "demo" class="table table-striped">
         <tr>
            <th>Serial</th>
            <th>Test Case Name</th>
            <th>Test Case</th>
            <th>Source Query</th>
            <th>Target Query</th>
         </tr>

         {% for row in students %}
         <td class="btn btn-primary" data-toggle="collapse" href="#collapseExample{{row.0}}" role="button" aria-expanded="false" aria-controls="collapseExample">
    Test Case {{row.0}}</td>
         <tr class="collapse" id="collapseExample{{row.0}}">
            <td>{{row.0}}</td>
            <td>{{row.1}}</td>
            <td>{{row.2}}</td>
            <td>{{row.3}}</td>
            <td>{{row.4}}</td>
            <td> <a href="/update/{{row.0}}" class="btn btn-warning btn-xs" data-toggle="modal" data-target="#modaledit{{row.0}}">Edit</a>
               <a href="/delete/{{ row.0 }}" class="btn btn-danger btn-xs" onclick="return confirm('Are you sure to delete?')">Delete</a>
            </td>
         </tr>
         </td>
         </tr>

         <div class="modal fade" id="modaledit{{row.0}}" role="dialog">
            <div class="modal-dialog">

              <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Please Insert data</h4>
                </div>
                <div class="modal-body">
                  <form action="{{url_for('update')}}" method="POST">
                    <div class="form-group">
                      <label>Test Case Name:</label>
                      <input type="hidden" name="id" value={{row.0}}>
                      <input type="text" class="form-control" name="testcasename" value={{row.1}}>
                    </div>
                    <div class="form-group">
                      <label>Test Case:</label>
                      <input type="text" class="form-control" name="testcase" value={{row.2}}>
                    </div>
                    <div class="form-group">
                      <label>Source Query:</label>
                      <input type="text" class="form-control" name="sourcequery" value={{row.3}}>
                    </div>
                    <div class="form-group">
                      <label>Target Query:</label>
                      <input type="text" class="form-control" name="targetquery" value={{row.3}}>
                    </div>
                    <div class="form-group">
                      <button class="btn btn-primary" type="submit">Update Data</button>
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>

            </div>
          </div>
         </div>
         {% endfor %}
      </table>
        </div>
      </div>
      {% endblock %}
   </body>
   <script type="text/javascript" src="{{url_for('static',filename='js/jquery-3.2.1.min.js')}}"></script>
   <script type="text/javascript" src="{{url_for('static',filename='js/bootstrap.min.js')}}"></script>
</html>
